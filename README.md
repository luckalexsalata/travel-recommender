# Travel Recommender API

FastAPI —Å–µ—Ä–≤—ñ—Å –¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü—ñ—ó —Ç—É—Ä–∏—Å—Ç–∏—á–Ω–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π –∑ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è–º OpenAI API.

## üöÄ –§—É–Ω–∫—Ü—ñ–æ–Ω–∞–ª—å–Ω—ñ—Å—Ç—å

- –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ç—É—Ä–∏—Å—Ç–∏—á–Ω–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π –Ω–∞ –æ—Å–Ω–æ–≤—ñ —Ç–µ–∫—Å—Ç–æ–≤–æ–≥–æ –∑–∞–ø–∏—Ç—É
- –ü—ñ–¥—Ç—Ä–∏–º–∫–∞ —Ä—ñ–∑–Ω–∏—Ö –º–æ–≤ (–≤—ñ–¥–ø–æ–≤—ñ–¥—å —Ç—ñ—î—é –∂ –º–æ–≤–æ—é, —â–æ –π –∑–∞–ø–∏—Ç)
- –ß–∞—Ç-–ø–æ–¥—ñ–±–Ω–∞ –≤–∑–∞—î–º–æ–¥—ñ—è –∑ –º–æ–∂–ª–∏–≤—ñ—Å—Ç—é —É—Ç–æ—á–Ω–µ–Ω—å —Ç–∞ –≤–∏–∫–ª—é—á–µ–Ω—å
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏—è–≤–ª–µ–Ω–Ω—è –≤–∏–∫–ª—é—á–µ–Ω—å –∑ —Ç–µ–∫—Å—Ç—É –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –Ω–∞–∫–æ–ø–∏—á–µ–Ω–Ω—è –≤–∏–∫–ª—é—á–µ–Ω—å –∑ –ø–æ–ø–µ—Ä–µ–¥–Ω—ñ—Ö –∑–∞–ø–∏—Ç—ñ–≤
- –ó–±–µ—Ä–µ–∂–µ–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó –∑–∞–ø–∏—Ç—ñ–≤ —É SQLite
- Retry-–ª–æ–≥—ñ–∫–∞ –¥–ª—è OpenAI API
- Swagger UI –¥–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è

## üìã –í–∏–º–æ–≥–∏

- Python 3.8+
- OpenAI API –∫–ª—é—á

## üõ† –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

1. **–ö–ª–æ–Ω—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π:**
```bash
git clone <repository-url>
cd travel-recommender
```

2. **–ü–µ—Ä–µ–π–¥—ñ—Ç—å –≤ –ø–∞–ø–∫—É backend:**
```bash
cd backend
```

3. **–°—Ç–≤–æ—Ä—ñ—Ç—å –≤—ñ—Ä—Ç—É–∞–ª—å–Ω–µ —Å–µ—Ä–µ–¥–æ–≤–∏—â–µ:**
```bash
python3 -m venv venv
source venv/bin/activate  # Linux/Mac
# –∞–±–æ
venv\Scripts\activate  # Windows
```

4. **–í—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ:**
```bash
pip install -r requirements.txt
```

5. **–ù–∞–ª–∞—à—Ç—É–π—Ç–µ –∑–º—ñ–Ω–Ω—ñ —Å–µ—Ä–µ–¥–æ–≤–∏—â–∞:**
```bash
cp env_example.txt .env
```

–í—ñ–¥—Ä–µ–¥–∞–≥—É–π—Ç–µ `.env` —Ñ–∞–π–ª:
```env
OPENAI_API_KEY=your_openai_api_key_here
DATABASE_URL=sqlite+aiosqlite:///./travel_recommender.db
HOST=0.0.0.0
PORT=8000
```

## üöÄ –ó–∞–ø—É—Å–∫

```bash
python3 run.py
```

–°–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è –Ω–∞ `http://localhost:8000`

## üìö API Endpoints

### –û—Å–Ω–æ–≤–Ω—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏:

- **POST** `/api/v1/recommendations/` - –ì–µ–Ω–µ—Ä–∞—Ü—ñ—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π (—á–∞—Ç-–≤–∑–∞—î–º–æ–¥—ñ—è)
- **GET** `/api/v1/recommendations/history` - –Ü—Å—Ç–æ—Ä—ñ—è –∑–∞–ø–∏—Ç—ñ–≤
- **GET** `/api/v1/recommendations/{id}` - –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏—Ö —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π
- **GET** `/api/v1/recommendations/search/?q=query` - –ü–æ—à—É–∫ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π
- **DELETE** `/api/v1/recommendations/{id}` - –í–∏–¥–∞–ª–µ–Ω–Ω—è —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π

### –°–∏—Å—Ç–µ–º–Ω—ñ –µ–Ω–¥–ø–æ—ñ–Ω—Ç–∏:

- **GET** `/` - –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞
- **GET** `/health` - Health check
- **GET** `/docs` - Swagger UI

## üìù –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ß–∞—Ç-–≤–∑–∞—î–º–æ–¥—ñ—è –∑ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–∏–º –≤–∏—è–≤–ª–µ–Ω–Ω—è–º –≤–∏–∫–ª—é—á–µ–Ω—å:

**–ü–µ—Ä—à–∏–π –∑–∞–ø–∏—Ç:**
```bash
curl -X POST "http://localhost:8000/api/v1/recommendations/" \
  -H "Content-Type: application/json" \
  -d '{
    "text": "–•–æ—á—É –≤ –†–∏–º, –ª—é–±–ª—é —ñ—Å—Ç–æ—Ä—ñ—é —Ç–∞ –º–∞–∫–∞—Ä–æ–Ω–∏",
    "num_places": 3
  }'
```

**–£—Ç–æ—á–Ω–µ–Ω–Ω—è –∑ –≤–∏–∫–ª—é—á–µ–Ω–Ω—è–º:**
```bash
curl -X POST "http://localhost:8000/api/v1/recommendations/" \
  -H "Content-Type: application/json" \
  -d '{
    "text": "–Ω–µ —Ö–æ—á—É –≤ –ö–æ–ª—ñ–∑–µ–π",
    "num_places": 3
  }'
```

**–î–æ–¥–∞—Ç–∫–æ–≤–µ —É—Ç–æ—á–Ω–µ–Ω–Ω—è:**
```bash
curl -X POST "http://localhost:8000/api/v1/recommendations/" \
  -H "Content-Type: application/json" \
  -d '{
    "text": "—ñ —â–µ –Ω–µ —Ö–æ—á—É –≤ –í–∞—Ç–∏–∫–∞–Ω",
    "num_places": 3
  }'
```

### –Ø–∫ –ø—Ä–∞—Ü—é—î –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–µ –≤–∏—è–≤–ª–µ–Ω–Ω—è –≤–∏–∫–ª—é—á–µ–Ω—å:

1. **–ü–µ—Ä—à–∏–π –∑–∞–ø–∏—Ç**: "–•–æ—á—É –≤ –†–∏–º, –ª—é–±–ª—é —ñ—Å—Ç–æ—Ä—ñ—é —Ç–∞ –º–∞–∫–∞—Ä–æ–Ω–∏"
   ‚Üí AI –≥–µ–Ω–µ—Ä—É—î 3 –º—ñ—Å—Ü—è –≤ –†–∏–º—ñ
   ‚Üí –í–∏–∫–ª—é—á–µ–Ω–Ω—è: []

2. **–î—Ä—É–≥–∏–π –∑–∞–ø–∏—Ç**: "–Ω–µ —Ö–æ—á—É –≤ –ö–æ–ª—ñ–∑–µ–π"
   ‚Üí AI —Ä–æ–∑—É–º—ñ—î, —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –≤–∏–∫–ª—é—á–∏—Ç–∏ –ö–æ–ª—ñ–∑–µ–π
   ‚Üí –ì–µ–Ω–µ—Ä—É—î 3 –º—ñ—Å—Ü—è –≤ –†–∏–º—ñ –ë–ï–ó –ö–æ–ª—ñ–∑–µ—é
   ‚Üí –í–∏–∫–ª—é—á–µ–Ω–Ω—è: ["–ö–æ–ª—ñ–∑–µ–π"]

3. **–¢—Ä–µ—Ç—ñ–π –∑–∞–ø–∏—Ç**: "—ñ —â–µ –Ω–µ —Ö–æ—á—É –≤ –í–∞—Ç–∏–∫–∞–Ω"
   ‚Üí AI —Ä–æ–∑—É–º—ñ—î, —â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –¥–æ–¥–∞—Ç–∏ –í–∞—Ç–∏–∫–∞–Ω –¥–æ –≤–∏–∫–ª—é—á–µ–Ω—å
   ‚Üí –ì–µ–Ω–µ—Ä—É—î 3 –º—ñ—Å—Ü—è –≤ –†–∏–º—ñ –ë–ï–ó –ö–æ–ª—ñ–∑–µ—é —Ç–∞ –í–∞—Ç–∏–∫–∞–Ω—É
   ‚Üí –í–∏–∫–ª—é—á–µ–Ω–Ω—è: ["–ö–æ–ª—ñ–∑–µ–π", "–í–∞—Ç–∏–∫–∞–Ω"]

**AI –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–æ–∑—É–º—ñ—î –∑ —Ç–µ–∫—Å—Ç—É, —â–æ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á —Ö–æ—á–µ –≤–∏–∫–ª—é—á–∏—Ç–∏!**

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è —ñ—Å—Ç–æ—Ä—ñ—ó:
```bash
curl "http://localhost:8000/api/v1/recommendations/history"
```

## üß™ –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è

```bash
# –ó–∞–ø—É—Å–∫ —Ç–µ—Å—Ç—ñ–≤
python -m pytest tests/

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —á–∞—Ç-–ª–æ–≥—ñ–∫–∏
python test_chat_logic.py

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è —á–µ—Ä–µ–∑ Swagger UI
# –í—ñ–¥–∫—Ä–∏–π—Ç–µ http://localhost:8000/docs
```

## üèó –ê—Ä—Ö—ñ—Ç–µ–∫—Ç—É—Ä–∞

```
backend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ core/           # –ö–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—è, middleware, –≤–∏–Ω—è—Ç–∫–∏
‚îÇ   ‚îú‚îÄ‚îÄ api/            # API —Ä–æ—É—Ç–∏
‚îÇ   ‚îú‚îÄ‚îÄ services/       # –ë—ñ–∑–Ω–µ—Å-–ª–æ–≥—ñ–∫–∞
‚îÇ   ‚îú‚îÄ‚îÄ models/         # –ú–æ–¥–µ–ª—ñ –ë–î
‚îÇ   ‚îî‚îÄ‚îÄ schemas/        # Pydantic —Å—Ö–µ–º–∏
‚îú‚îÄ‚îÄ tests/              # –¢–µ—Å—Ç–∏
‚îú‚îÄ‚îÄ requirements.txt    # –ó–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ
‚îî‚îÄ‚îÄ run.py             # –¢–æ—á–∫–∞ –≤—Ö–æ–¥—É
```

## üîß –¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó

- **FastAPI** - –≤–µ–±-—Ñ—Ä–µ–π–º–≤–æ—Ä–∫
- **SQLAlchemy** - ORM
- **aiosqlite** - –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞ SQLite
- **OpenAI** - AI –≥–µ–Ω–µ—Ä–∞—Ü—ñ—è
- **Pydantic** - –≤–∞–ª—ñ–¥–∞—Ü—ñ—è –¥–∞–Ω–∏—Ö

## üìÑ –õ—ñ—Ü–µ–Ω–∑—ñ—è

MIT 